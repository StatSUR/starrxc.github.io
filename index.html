<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>World Life æœåŠ¡å™¨å®˜ç½‘</title>
  <link rel="icon" href="favicon.png" type="image/png" />
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial; display:flex; flex-direction:column; min-height:100vh; background:#fff; color:#111; transition:background .3s, color .3s; }
    @media(prefers-color-scheme:dark) { body { background:#0f172a; color:#f8fafc; } }
    header, footer { background:linear-gradient(90deg,#0ea5e9,#6366f1); color:#fff; padding:1rem 2rem; position:sticky; width:100%; z-index:100; }
    header { display:flex; align-items:center; position:relative; }
    .title { position:absolute; left:50%; transform:translateX(-50%); font-size:1.5rem; font-weight:bold; }
    .user-info { font-size:1.2rem; font-weight:bold; padding:.2rem .6rem; border:2px solid #38bdf8; border-radius:12px; background:rgba(255,255,255,.3); cursor:default; }
    @media(prefers-color-scheme:dark) { .user-info { background:rgba(255,255,255,.1); border-color:#8b5cf6; } }
    nav { margin-left:auto; display:flex; gap:1rem; }
    nav a { color:#fff; text-decoration:none; font-weight:500; transition:color .2s; }
    nav a:hover, nav a.active { color:#facc15; }
    main { flex:1; padding:2rem; max-width:960px; margin:0 auto; }
    section { background:#f9fafb; padding:1.5rem; margin:2rem 0; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,.1); max-width:700px; margin-left:auto; margin-right:auto; transition:transform .3s, box-shadow .3s; }
    section:hover { transform:translateY(-5px); box-shadow:0 4px 20px rgba(0,0,0,.2); }
    @media(prefers-color-scheme:dark) { section { background:#1e293b; box-shadow:0 2px 8px rgba(0,0,0,.5); } section:hover { box-shadow:0 6px 24px rgba(0,0,0,.7); } }
    h2 { margin-bottom:.8rem; color:#1e40af; }
    @media(prefers-color-scheme:dark) { h2 { color:#fff; } }
    .team { display:flex; flex-wrap:wrap; gap:1rem; }
    .team span { background:#e2e8f0; padding:.5rem 1rem; border-radius:9999px; font-weight:500; }
    @media(prefers-color-scheme:dark) { .team span { background:#334155; } }
    form { display:flex; flex-direction:column; gap:1rem; }
    .input-group { position:relative; }
    input, button { padding:.6rem; border:none; border-radius:6px; font-size:1rem; width:100%; transition:background .3s; }
    input { background:#fff; border:1px solid #ccc; color:#111; }
    button { background:#3b82f6; color:#fff; cursor:pointer; }
    button:hover { opacity:.9; }
    .toggle-pw { position:absolute; top:50%; right:0.8rem; transform:translateY(-50%); cursor:pointer; font-size:1.1rem; }
    @media(prefers-color-scheme:dark) { input { background:#334155; color:#f8fafc; border:1px solid #475569; } button { background:#6366f1; } span.hint { color:#aaa; } }
    span.hint { font-size:.9rem; color:#555; }
    .fadeIn { animation:fadeIn .5s ease-in-out; }
    @keyframes fadeIn { from { opacity:0; transform:translateY(10px);} to { opacity:1; transform:translateY(0);} }
    .modal-overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.5); display:none; justify-content:center; align-items:center; }
    .modal { position:relative; background:#fff; padding:1.5rem; border-radius:8px; width:90%; max-width:400px; box-shadow:0 4px 20px rgba(0,0,0,.3); display:flex; flex-direction:column; text-align:left; }
    .modal h3 { margin-bottom:1rem; color:#1e40af; }
    .modal button.close { align-self:flex-end; background:none; border:none; font-size:1.2rem; cursor:pointer; line-height:1; }
    @media(prefers-color-scheme:dark) { .modal { background:#1e293b; color:#f8fafc; } .modal h3 { color:#facc15; } }
    .slider-captcha { user-select:none; width:100%; max-width:300px; margin:1rem 0; background:#e5e7eb; border-radius:6px; height:40px; position:relative; overflow:hidden; }
    .slider-track { position:absolute; height:100%; width:100%; background:#d1d5db; }
    .slider-fill { position:absolute; top:0; left:0; height:100%; background:#10b981; z-index:1; width:0; }
    .slider-thumb { position:absolute; top:0; left:0; width:40px; height:40px; background:#3b82f6; color:#fff; display:flex; align-items:center; justify-content:center; border-radius:6px; cursor:pointer; transition:background .3s; z-index:2; }
    .slider-success { background:#10b981!important; }
  </style>
</head>
<body>
  <header>
    <div class="user-info" id="user-info">æœªç™»å½•</div>
    <div class="title">World Life å®˜æ–¹ç½‘ç«™</div>
    <nav>
      <a href="#home" data-page="home" onclick="switchPage(event)">é¦–é¡µ</a>
      <a href="#server" data-page="server" onclick="switchPage(event)">æœåŠ¡å™¨</a>
      <a href="#commands" data-page="commands" onclick="switchPage(event)">æŒ‡ä»¤</a>
      <a href="#daily" data-page="daily" onclick="switchPage(event)">æ—¥æŠ¥</a>
      <a href="#login" id="login-register-nav" data-page="login" onclick="switchPage(event)">ç™»å½•/æ³¨å†Œ</a>
    </nav>
  </header>
  <main id="content"></main>
  <footer>&copy; 2025 World Life æœåŠ¡å™¨ by RXC</footer>
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal" id="modal">
      <button class="close" onclick="closeModal()">âŒ</button>
      <h3 id="modal-title"></h3>
      <p id="modal-message"></p>
    </div>
  </div>
  <script>
    const diaryEntries = [
      { file: 'DATE1.html', date: '2025-08-06', desc: 'æµ‹è¯•æ—¥æŠ¥ã€‚' },
      { file: 'DATE2.html', date: '2025-08-05', desc: 'æœåŠ¡å™¨ç»´æŠ¤ï¼Œä¼˜åŒ–äº†åœ°å›¾åŠ è½½é€Ÿåº¦ã€‚' }
    ];

    function getHomePage() {
      return `<section class="fadeIn"><h2>æ¬¢è¿æ¥åˆ° World Life æœåŠ¡å™¨</h2><p>è¿™æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ Minecraft ä¸–ç•Œï¼Œä½ å¯ä»¥åŠ å…¥ä¸åŒçœä»½ï¼Œæ‰®æ¼”å¤šç§è§’è‰²~</p></section>` +
             `<section class="fadeIn"><h2>ä¸–ç•Œåœ°å›¾ç©æ³•</h2><p>åœ¨1:1000æ¯”ä¾‹çš„ä¸–ç•Œåœ°å›¾ä¸­ï¼Œå¯åŠ å…¥æˆ–åˆ›å»ºçœä»½~</p></section>` +
             `<section class="fadeIn"><h2>ä¸»è¦äººå‘˜</h2><div class="team"><span>æœä¸»ï¼šæ˜Ÿæ˜Ÿ RXC</span><span>å»ºæœè€…ï¼šæ´›ç™½</span><span>ç®¡ç†å‘˜ï¼šCHLovo</span><span>ç©å®¶ï¼šæ¬¢è¿åŠ å…¥ï¼</span></div></section>`;
    }

    function getDailyPage() {
      let list = '<ul>';
      diaryEntries.forEach(entry => {
        list += `<li><a href="${entry.file}" target="_blank">${entry.date}</a> â€” ${entry.desc}</li>`;
      });
      list += '</ul>';
      return `<section class="fadeIn"><h2>æœåŠ¡å™¨æ—¥æŠ¥åˆ—è¡¨</h2>${list}</section>`;
    }

    function getLoginPage() {
      return `<section class="fadeIn"><h2>è¯·ç™»å½•~</h2><form onsubmit="handleLogin(event)">` +
             `<div class="input-group"><input id="login-username" type="text" placeholder="ç”¨æˆ·å" required minlength="3"/></div>` +
             `<div class="input-group"><input id="login-password" type="password" placeholder="å¯†ç " required/>` +
             `<span class="toggle-pw" onclick="togglePassword('login-password')">ğŸ‘ï¸</span></div>` +
             `<button type="submit">ç™»å½•</button></form></section>` +
             `<section class="fadeIn"><h2>æ³¨å†Œæ–°è´¦æˆ·~</h2><form onsubmit="handleRegister(event)">` +
             `<div class="input-group"><input id="register-username" type="text" placeholder="æ–°ç”¨æˆ·åï¼ˆè‡³å°‘3å­—ç¬¦ï¼‰" required minlength="3"/></div>` +
             `<div class="input-group"><input id="register-password" type="password" placeholder="æ–°å¯†ç ï¼ˆ8-16ä½ï¼‰" pattern=".{8,16}" required/>` +
             `<span class="toggle-pw" onclick="togglePassword('register-password')">ğŸ‘ï¸</span></div>` +
             `<span class="hint">å¯†ç é•¿åº¦éœ€8-16ä½~</span>` +
             `<div class="input-group"><input id="register-confirm" type="password" placeholder="ç¡®è®¤å¯†ç " required/>` +
             `<span class="toggle-pw" onclick="togglePassword('register-confirm')">ğŸ‘ï¸</span></div>` +
             `<div class="slider-captcha" id="slider"><div class="slider-track"></div><div class="slider-fill"></div><div class="slider-thumb" id="slider-thumb">â©</div>` +
             `<input type="hidden" id="captcha-verified" value="false"/><span class="hint">æ‹–åŠ¨æ»‘å—å®ŒæˆéªŒè¯~</span></div>` +
             `<button type="submit">æ³¨å†Œ</button></form></section>`;
    }

    const pages = {
      home: getHomePage(),
      server: `<section class="fadeIn"><h2>å¦‚ä½•åŠ å…¥æœåŠ¡å™¨</h2><p>åŠ å…¥æˆ‘ä»¬çš„QQç¾¤ï¼š749664574~</p></section>`,
      commands: `<section class="fadeIn"><h2>å¸¸ç”¨æŒ‡ä»¤åˆ—è¡¨</h2><ul><li>/reg å¯†ç  å¯†ç ï¼šæ³¨å†Œ</li><li>/login å¯†ç ï¼šç™»å½•</li><li>/tpa ç©å®¶åï¼šä¼ é€è¯·æ±‚</li><li>/tpahere ç©å®¶åï¼šè¯·æ±‚å¯¹æ–¹ä¼ é€</li><li>/backï¼šå›åˆ°æ­»äº¡/ä¼ é€ç‚¹</li><li>/co iï¼šå¯ç”¨/å…³é—­æ£€æŸ¥å™¨</li></ul></section>`,
      daily: getDailyPage(),
      login: ''
    };

    function updateUserInfo() {
      const user = localStorage.getItem('currentUser');
      const userInfo = document.getElementById('user-info');
      const loginNav = document.getElementById('login-register-nav');
      if (user) {
        userInfo.innerHTML = `æ‚¨å¥½ï¼Œ${user} | <a href="#" onclick="logoutUser()">æ³¨é”€</a>`;
        loginNav.textContent = 'æˆ‘çš„ä¿¡æ¯';
        pages.login = `<section class="fadeIn"><h2>å½“å‰ç”¨æˆ·ä¿¡æ¯</h2><p>ç”¨æˆ·åï¼š${user}</p><p>ç™»å½•æ—¶é—´ï¼š${new Date().toLocaleString()}</p><button onclick="logoutUser()">æ³¨é”€</button></section>`;
      } else {
        userInfo.textContent = 'æœªç™»å½•';
        loginNav.textContent = 'ç™»å½•/æ³¨å†Œ';
        pages.login = getLoginPage();
      }
    }

    function switchPage(e) {
      e.preventDefault();
      document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
      e.currentTarget.classList.add('active');
      updateUserInfo();
      const page = e.currentTarget.dataset.page;
      document.getElementById('content').innerHTML = pages[page] || '';
      if (page === 'login' && !localStorage.getItem('currentUser')) initSliderCaptcha();
    }

    function logoutUser(){
      localStorage.removeItem('currentUser');
      updateUserInfo();
      pages.login = getLoginPage();
      showModal('å·²æ³¨é”€','æ‚¨å·²æˆåŠŸé€€å‡ºç™»å½•');
      document.querySelector('nav a[data-page="home"]').click();
    }

    function showModal(title,msg){
      document.getElementById('modal-title').textContent=title;
      document.getElementById('modal-message').textContent=msg;
      document.getElementById('modal-overlay').style.display='flex';
    }

    function closeModal(){
      document.getElementById('modal-overlay').style.display='none';
    }

    function handleLogin(e){
      e.preventDefault();
      const user=document.getElementById('login-username').value;
      const pass=document.getElementById('login-password').value;
      const users=JSON.parse(localStorage.getItem('users')||'{}');
      if(!users.hasOwnProperty(user))showModal('ç™»å½•å¤±è´¥','æ²¡æœ‰æ­¤è´¦æˆ·ï¼');
      else if(users[user]!==pass)showModal('ç™»å½•å¤±è´¥','å¯†ç é”™è¯¯ï¼');
      else{
        localStorage.setItem('currentUser',user);
        updateUserInfo();
        showModal('ç™»å½•æˆåŠŸ',`æ¬¢è¿å›æ¥ï¼Œ${user}ï¼`);
        document.querySelector('nav a[data-page="home"]').click();
      }
    }

    function handleRegister(e) {
      e.preventDefault();
      const user = document.getElementById('register-username').value;
      const pass = document.getElementById('register-password').value;
      const conf = document.getElementById('register-confirm').value;
      const passed = document.getElementById('captcha-verified').value === 'true';
      const users = JSON.parse(localStorage.getItem('users')||'{}');
      if (!passed) return showModal('æ³¨å†Œå¤±è´¥', 'è¯·å®Œæˆæ»‘å—éªŒè¯~');
      if (pass !== conf) return showModal('æ³¨å†Œå¤±è´¥', 'ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´~');
      if (pass.length<8||pass.length>16) return showModal('æ³¨å†Œå¤±è´¥', 'å¯†ç é•¿åº¦éœ€8-16ä½~');
      if (users[user]) return showModal('æ³¨å†Œå¤±è´¥', 'ç”¨æˆ·åå·²å­˜åœ¨~');
      users[user] = pass;
      localStorage.setItem('users', JSON.stringify(users));
      showModal('æ³¨å†ŒæˆåŠŸ','æ³¨å†ŒæˆåŠŸ~');
      document.querySelector('nav a[data-page="login"]').click();
    }

    function initSliderCaptcha() {
      const thumb=document.getElementById('slider-thumb');
      const track=document.getElementById('slider');
      if(!thumb||!track)return;
      thumb.style.left='0';
      document.getElementById('captcha-verified').value='false';
      const fill=track.querySelector('.slider-fill');
      fill.style.width='0';
      let dragging=false,startX=0;
      thumb.onmousedown=e=>{dragging=true;startX=e.clientX;document.onmousemove=drag;document.onmouseup=stop;};
      function drag(e){
        if(!dragging) return;
        let d=e.clientX-startX;
        d=Math.max(0,Math.min(d,track.offsetWidth-thumb.offsetWidth));
        thumb.style.left=d+"px";
        fill.style.width=d+"px";
      }
      function stop(){
        dragging=false;document.onmousemove=null;document.onmouseup=null;
        if(parseInt(thumb.style.left)>=track.offsetWidth-thumb.offsetWidth-2){
          thumb.classList.add('slider-success');
          thumb.textContent='âœ…';
          document.getElementById('captcha-verified').value='true';
          thumb.onmousedown=null;
        } else {
          thumb.style.left='0'; fill.style.width='0';
        }
      }
    }

    function togglePassword(id) {
      const input = document.getElementById(id);
      input.type = input.type === 'password' ? 'text' : 'password';
    }

    window.onload = () => {
      updateUserInfo();
      document.querySelector('nav a[data-page="home"]').click();
    };
  </script>
</body>
</html>

